\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{notes}[Custom format for lecture notes]

% other packages:
\RequirePackage{amsmath, amsthm, amsfonts, amssymb, mathtools} % math symbols and environments
\RequirePackage{enumitem,multicol} % tables
\RequirePackage{tikz, pgfplots, graphicx} % pictures 
\RequirePackage{hyperref} % links
\RequirePackage[letterpaper,total={6.5in,9in},left=1in,top=.8in]{geometry} % paper size+margins
\RequirePackage{lmodern} % fonts
\RequirePackage{fancyhdr} % headers and footers
\RequirePackage{xcolor} % colors
\RequirePackage{tcolorbox} % colorful boxes for custom environments
\RequirePackage{comment}

% styling and package options
\pgfplotsset{compat=1.18}
\let\c@tcb@cnt@definition\relax
\renewcommand{\familydefault}{\sfdefault} % use sans-serif font
\tcbuselibrary{breakable} % lets tcolorboxes break over pages
\pagestyle{fancy} % use headers and footers
\lhead{MATH 21} % left header is class name
\rhead{\rightmark} % right name is current subsection of document
\renewcommand{\subsectionmark}[1]{\markright{\thesubsection\ #1}} % formats right header
\hypersetup{colorlinks=true,linkcolor=blue,urlcolor=cyan,filecolor=magenta} % color links
\renewcommand{\arraystretch}{1.3} % table spacing
\setlength{\headheight}{50pt} % header height
\setlength{\headsep}{12pt} % header spacing
\setlength{\parindent}{0mm} % no indentation
\setlength{\parskip}{3mm} % space after paragraphs/environments

% math commands
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\inv}{^{-1}}
\renewcommand{\qed}{\ensuremath{\hfill\blacksquare}}
\newcommand{\?}{\stackrel{?}{=}}

% typesetting commands
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{\node[shape=circle,draw,inner sep=1pt] (char) {#1};}}
% TODO - troubleshoot these
% \newcommand{\drawx}[2]{\draw[very thick, <->] ({#1},0) -- ({#2},0) node[anchor=west] {$x$};}
% \newcommand{\drawy}[2]{\draw[very thick, <->] (0,{#1}) -- (0,{#2}) node[anchor=south] {$y$};}
% \newcommand{\drawgridaxes}[2]{def}

% environments
\definecolor{def}{HTML}{44FF66}
\definecolor{thm}{HTML}{FF44AA}
\definecolor{formulae}{HTML}{44AAFF}
\definecolor{example}{HTML}{FFAA44}
\definecolor{solution}{HTML}{888888}

% problem list environment; has lables in style `(a)`, and max depth 10
\newlist{problem}{enumerate}{10}
\setlist[problem]{label=(\alph*)}

% single counter for definitions/theorems/examples
\newcounter{items}
\counterwithin{items}{subsection}

% custom environments
\newtcolorbox[use counter=items, number within=subsection]{definition}[3][]{
    colback=def!5!white, colframe=def!75!black, 
    fonttitle=\bfseries, title=Definition \thetcbcounter\ #2,#1,
    label=#3, breakable
}
\newtcolorbox[use counter from=definition]{thm}[3][]{
    colback=thm!5!white, colframe=thm!75!black, 
    fonttitle=\bfseries, title=Theorem \thetcbcounter #2,#1,
    label=#3, breakable
}
\newtcolorbox[use counter from=definition]{formula}[3][]{
    colback=formulae!5!white, colframe=formulae!75!black, 
    fonttitle=\bfseries, title=Formula \thetcbcounter\ #2,#1 ,
    label=#3, breakable
}
\newtcolorbox[use counter from=definition]{prop}[3][]{
    colback=thm!5!white, colframe=thm!75!black, 
    fonttitle=\bfseries, title=Proposition \thetcbcounter\ #2,#1,
    label=#3, breakable
}
\newtcolorbox[]{process}[3][]{
    colback=thm!5!white, colframe=thm!75!black, 
    fonttitle=\bfseries, title=#2,#1,
    label=#3, breakable
}
\newtcolorbox[use counter from=definition]{example}[3][]{
    colback=example!5!white, colframe=example!75!black, 
    fonttitle=\bfseries, title=Example \thetcbcounter\ #2,#1,
    label=#3, breakable
}
\newtcolorbox{solution}{
    colback=solution!5!white, colframe=solution!75!black, 
    fonttitle=\bfseries, title=Solution,
    breakable
}
% \newtcolorbox{directions}{
%     colback=black!20!white, colframe=black!20!white
% }
\includecomment{directions}
\newtcolorbox[use counter from=definition]{remark}[3][]{
    colback=formulae!5!white, colframe=formulae!75!black,
    fonttitle=\bfseries, title=Remark \thetcbcounter\ #2,#1,
    label=#3, breakable
}
\newcommand{\todo}[1]{\symbol{"26A0} \red{TODO: #1}}